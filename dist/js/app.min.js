/* workspace creada por jh7a */
function makeTree(a,b){b.droppable(funcDroppableFalse);var c,d,e=a.data("id"),f=++idCode,g=new Tree;if(b.removeClass("ultimo-e"),b.data("id")?(d=b.data("father"),c=b.data("pos")):(c=0,d=0),a.addClass("card2"),a.removeClass("card"),a.draggable({appendTo:"body",cursor:"move",revert:"invalid",greedy:!0}),a.attr("data-id",f),g.id=f,"var"==e){var h=a.data("type"),i=a.data("content"),j=a.data("metadatos");if(g.tag="<mn>"+i+"</mn>",g.meta.type=h,g.meta.id=i,"espcifica"==h)g.meta.value=j;else{var k,k,k,k=j.split(",");for(var l in k)g.meta["value"+l]=k[l]}}else if("cons"==e)g.tag="<mn>"+a.data("content")+"</mn>";else if("llaves"==e||"parentesis"==e||"corchetes"==e||"factorial"==e){var m=a.find("code:nth-child(1)");m.attr("data-id",++idCode),m.attr("data-pos",0),m.attr("data-father",f),m.addClass("ultimo-e"),"llaves"==e?(g.opentag="<mrow><mtext>{</mtext>",g.closetag="<mtext>}</mtext></mrow>"):"parentesis"==e?(g.opentag="<mrow><mtext>(</mtext>",g.closetag="<mtext>)</mtext></mrow>"):"corchetes"==e?(g.opentag="<mrow><mtext>[</mtext>",g.closetag="<mtext>]</mtext></mrow>"):(g.opentag="<mrow><mtext>(</mtext>",g.tag="",g.closetag="<mtext>)!</mtext></mrow>"),g.setChildren(["<mi>□</mi>"])}else if("trig"==e){var m=a.find("code:nth-child(1)");m.attr("data-id",++idCode),m.attr("data-pos",0),m.attr("data-father",f),m.addClass("ultimo-e"),g.opentag="<mrow><mi>"+a.data("content")+"</mi><mtext>(</mtext>",g.closetag="<mtext>)</mtext></mrow>",g.setChildren(["<mi>□</mi>"])}else if("raiz"==e){var m=a.find("code:nth-child(1)");m.attr("data-id",++idCode),m.attr("data-pos",0),m.attr("data-father",f),m.addClass("ultimo-e"),g.opentag="<mrow><msqrt><mtext>(</mtext>",g.closetag="</msqrt><mtext>)</mtext></mrow>",g.setChildren(["<mi>□</mi>"])}else if("raiz-n"==e){var n=a.find("code:nth-child(1)");n.attr("data-id",++idCode),n.attr("data-pos",1),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("code:nth-child(3)");o.attr("data-id",++idCode),o.attr("data-pos",0),o.attr("data-father",f),o.addClass("ultimo-e"),g.opentag="<mrow><mroot>",g.closetag="</mroot></mrow>",g.setChildren(["<mrow><mi>□</mi></mrow>","<mrow><mi>□</mi></mrow>"])}else if("expo"==e||"expo-base"==e){var n=a.find("code:nth-child(1)");n.attr("data-id",++idCode),n.attr("data-pos",0),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("code:nth-child(2)");o.attr("data-id",++idCode),o.attr("data-pos",1),o.attr("data-father",f),o.addClass("ultimo-e"),"expo"==e?(g.opentag="<mrow><msup>",g.closetag="</msup></mrow>"):(g.opentag="<mrow><msub>",g.closetag="</msub></mrow>"),g.setChildren(["<mrow><mi>□</mi></mrow>","<mrow><mi>□</mi></mrow>"])}else if("log"==e){var n=a.find("code:nth-child(1)");n.attr("data-id",++idCode),n.attr("data-pos",0),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("code:nth-child(2)");o.attr("data-id",++idCode),o.attr("data-pos",1),o.attr("data-father",f),o.addClass("ultimo-e"),g.opentag="<mrow><mi>"+a.data("content")+"</mi><msub>",g.closetag="</msub></mrow>",g.setChildren(["<mrow><mi>□</mi></mrow>","<mrow><mi>□</mi></mrow>"])}else if("suma"==e||"resta"==e||"mult"==e||"igual"==e){var n=a.find("code:nth-child(1)");n.attr("data-id",++idCode),n.attr("data-pos",0),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("code:nth-child(2)");o.attr("data-id",++idCode),o.attr("data-pos",2),o.attr("data-father",f),o.addClass("ultimo-e"),g.opentag="<mrow><mtext>(</mtext>",g.closetag="<mtext>)</mtext></mrow>",g.setChildren(["<mrow><mi>□</mi></mrow>","<mo>"+a.data("content")+"</mo>","<mrow><mi>□</mi></mrow>"])}else if("funcionf"==e){var n=a.find("code:nth-child(1)");n.attr("data-id",++idCode),n.attr("data-pos",0),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("code:nth-child(2)");o.attr("data-id",++idCode),o.attr("data-pos",2),o.attr("data-father",f),o.addClass("ultimo-e"),g.opentag="<mrow><mtext>f(</mtext>",g.closetag="</mrow>",g.setChildren(["<mrow><mi>□</mi></mrow>","<mo>)=</mo>","<mrow><mi>□</mi></mrow>"])}else if("combinatoria"==e){var n=a.find("div:nth-child(2)").find("div:nth-child(1)");n.attr("data-id",++idCode),n.attr("data-pos",0),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("div:nth-child(2)").find("div:nth-child(2)");o.attr("data-id",++idCode),o.attr("data-pos",1),o.attr("data-father",f),o.addClass("ultimo-e"),g.opentag="<mrow><mtext>(</mtext><mfrac linethickness='0em'>",g.closetag="</mfrac><mtext>)</mtext></mrow>",g.setChildren(["<mrow><mi>□</mi></mrow>","<mrow><mi>□</mi></mrow>"])}else if("division"==e){var n=a.find("div:nth-child(2)").find("div:nth-child(1)");n.attr("data-id",++idCode),n.attr("data-pos",0),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("div:nth-child(2)").find("div:nth-child(3)");o.attr("data-id",++idCode),o.attr("data-pos",1),o.attr("data-father",f),o.addClass("ultimo-e"),g.opentag="<mrow><mtext>(</mtext><mfrac linethickness='1px'>",g.closetag="</mfrac><mtext>)</mtext></mrow>",g.setChildren(["<mrow><mi>□</mi></mrow>","<mrow><mi>□</mi></mrow>"])}else if("sumatoria"==e||"integral"==e||"multiplicatoria"==e){var n=a.find("div:nth-child(3)").find("div:nth-child(2)");n.attr("data-id",++idCode),n.attr("data-pos",0),n.attr("data-father",f),n.addClass("ultimo-e");var o=a.find("div:nth-child(3)").find("div:nth-child(1)");o.attr("data-id",++idCode),o.attr("data-pos",1),o.attr("data-father",f),o.addClass("ultimo-e");var p=a.find("code");p.attr("data-id",++idCode),p.attr("data-pos",3),p.attr("data-father",f),p.addClass("ultimo-e");var q;"sumatoria"==e?q="<mo>&#x2211;</mo>":"integral"==e?q="<mo>&#x222B;</mo>":"multiplicatoria"==e&&(q="<mo>&#x220F;</mo>"),g.opentag="<mrow><munderover>"+q,g.closetag="</mrow>",g.setChildren(["<mrow><mi>□</mi></mrow>","<mrow><mi>□</mi></mrow>","</munderover>","<mrow><mi>□</mi></mrow>"])}else if("func-2"==e||"func-3"==e||"func-4"==e||"func-5"==e){for(var r=e.substring(e.lastIndexOf("-")+1),s=[],t=0;r>t;t++){var u="code:nth-child("+(t+1)+")",m=a.find(u);m.attr("data-id",++idCode),m.attr("data-pos",0),m.attr("data-father",f),m.addClass("ultimo-e"),s[t]="<mrow><mi>□</mi></mrow>"}g.opentag="<mrow><mtext>(</mtext>",g.closetag="<mtext>)</mtext></mrow>",g.setChildren(s)}treeActual.addNode(d,g,c);var v=a.find(".spa");v.addClass("drop2"),v.droppable(funcDroppable)}function Tree(){this.id="",this.tag="",this.opentag="",this.closetag="",this.children=[],this.meta={}}function makeStringRec(a){var b="";if(a instanceof Tree){if(a.opentag&&(b=a.opentag),a.tag&&(b+=a.tag),a.children&&a.children.length>0)for(var c in a.children){var d=a.children[c];b+=makeStringRec(d)}a.closetag&&(b+=a.closetag)}else for(var c in a)b+=a[c];return b}function addNodeRec(a,b,c){if(a.id===b)endFunction=!0,c(a);else if(!endFunction)if(a.children)if(a.children.length>0)for(var d in a.children){var e=a.children[d];addNodeRec(e,b,c)}else c(null,"no se encontro el id");else c(null,"no se encontraron hijos")}function removeNodeRec(a,b,c){if(a instanceof Tree)if(a.id==b)endFunction=!0,c(a);else if(!endFunction)if(a.children)if(a.children.length>0)for(var d in a.children){var e=a.children[d];addNodeRec(e,b,c)}else c(null,"no se encontro el id");else c(null,"no se encontraron hijos")}function rebootTree(){first=!0,$(".drop").droppable(funcDroppableDrop),treeActual=new Tree,treeActual.id=0}function rebootTree2(){firstRespuesta=!0,console.log($("#content-drop-respuestas")),$("#content-drop-respuestas").droppable(funcDroppableDrop),treeActualRespuestas=new Tree,treeActualRespuestas.id=0}function Variable(){this.name="",this.type="",this.inc="",this.value={},this.numb=[]}function varToXML(){var a="<variables>";if(conjuntoVariables.length>0){for(var b in conjuntoVariables){var c,d=conjuntoVariables[b];if("espcifica"==d.type)c="<variable tipo="+d.type+" id="+d.name+">",c=c+"<valor>"+d.numb[0]+"</valor></variable>";else if("discreta"==d.type){c="<variable tipo="+d.type+" id="+d.name+">";for(var e in d.numb)c=c+"<valor>"+d.numb[e]+"</valor>";c+="</variable>"}else if("categorica"==d.type){c="<variable tipo="+d.type+" id="+d.name+">";for(var e in d.numb)c=c+"<valor>"+d.numb[e]+"</valor>";c+="</variable>"}else"normal"==d.type?(c="<variable tipo="+d.type+" cifras_decimales="+d.cifras+" id="+d.name+">",c=c+"<media>"+d.value.media+"</media>",c=c+"<desviacion>"+d.value.desviacion+"</desviacion></variable>"):"uniforme"==d.type?(c="<variable tipo="+d.type+" cifras_decimales="+d.cifras+" id="+d.name+">",c=c+"<inicio>"+d.value.inicio+"</fin>",c=c+"<fin>"+d.value.fin+"</fin></variable>"):"exponencial"==d.type&&(c="<variable tipo="+d.type+" cifras_decimales="+d.cifras+" id="+d.name+">",c=c+"<lamda>"+d.value.lamda+"</lamda></variable>");a+=c}a+="</variables>"}}function setEndOfContenteditable(a){var b,c;document.createRange?(b=document.createRange(),b.selectNodeContents(a),b.collapse(!1),c=window.getSelection(),c.removeAllRanges(),c.addRange(b)):document.selection&&(b=document.body.createTextRange(),b.moveToElementText(a),b.collapse(!1),b.select())}var idCode=0,first=!0,firstRespuesta=!0,inRespuesta=!1,endFunction=!1,treeActual=new Tree,treeActualRespuestas=new Tree;$(function(){$(".card").draggable({appendTo:"body",cursor:"move",helper:"clone",revert:"invalid",drag:function(){}})}),$(function(){$("#droppable-out").droppable(funcDroppableOut)});var funcDroppableOut={tolerance:"intersect",accept:".card2",drop:function(a,b){var c=$(b.draggable);if(c.hasClass("first"))rebootTree(),UpdateMath("<math></math>");else if(c.hasClass("firstRespuesta"))rebootTree2();else{var d=c.parent();d.addClass("ultimo-e");var e=d.data("father"),f=d.data("pos"),g=$("div").find("[data-id="+e+"]"),h=g.find(".spa");h.addClass("drop2"),h.droppable(funcDroppable),treeActual.removeNode(e,f);var i=treeActual.makeString();UpdateMath("<math>"+i+"</math>")}c.remove()}},funcDroppableDrop={tolerance:"intersect",accept:".card",activeClass:"ui-state-default",hoverClass:"drop-p",drop:function(a,b){var c=$(b.draggable).clone();makeTree(c,$(this)),$(this).append(c);var d=treeActual.makeString();UpdateMath("<math>"+d+"</math>"),console.log("mathml:"),console.log(d),console.log("tree:"),console.log(treeActual),!inRespuesta&&first?(first=!1,c.addClass("first")):firstRespuesta&&(firstRespuesta=!1,c.addClass("firstRespuesta"))}},funcDroppable={tolerance:"touch",accept:".card",activeClass:"drop-3",hoverClass:function(){return $(this).children().length<1?"drop-2":""},drop:function(a,b){var c=$(b.draggable).clone();makeTree(c,$(this)),$(this).append(c);var d=treeActual.makeString();UpdateMath("<math>"+d+"</math>"),console.log("mathml:"),console.log(d),console.log("tree:"),console.log(treeActual)}},funcDroppableFalse={tolerance:"touch",accept:".naskiajs",activeClass:"aaa3",drop:function(){}};!function(){var a=MathJax.Hub.queue,b=null;a.Push(function(){b=MathJax.Hub.getAllJax("previsualizar")[0]}),window.UpdateMath=function(c){a.Push(["Text",b,c])}}(),Tree.prototype.init=function(a,b,c,d,e){this.id=a,this.tag=b,this.opentag=c,this.closetag=d,this.children=e},Tree.prototype.setChildren=function(a){this.children=a},Tree.prototype.setChildrenPos=function(a,b){console.log("children"),console.log(b),this.children.splice(a,1,b)},Tree.prototype.makeString=function(){var a=makeStringRec(this);return a},Tree.prototype.addNode=function(a,b,c){endFunction=!1,0==this.children.length?this.children=[b]:addNodeRec(this,a,function(a,d){d?console.log(d):a.setChildrenPos(c,b)})},Tree.prototype.removeNode=function(a,b){endFunction=!1,removeNodeRec(this,a,function(a,c){c?console.log(c):a.children[b]="<mi>□</mi>"})};var varn,arrayValues=[];jsonValues={};var conjuntoVariables=[];$(document).ready(function(){function a(){varn=new Variable,arrayValues=[],jsonValues={},$("#formEspecifica").fadeOut("fast"),$("#formDiscreta").fadeOut("fast"),$("#formCategorica").fadeOut("fast"),$("#formNormal").fadeOut("fast"),$("#formUniforme").fadeOut("fast"),$("#formExponencial").fadeOut("fast")}$("#rootwizard").bootstrapWizard(),$("#valor").rating(),$("#valorA").rating(),$("#varEspecifica").click(function(){a(),$("#formEspecifica").fadeIn()}),$("#varDiscreta").click(function(){a(),$("#formDiscreta").fadeIn()}),$("#varCategorica").click(function(){a(),$("#formCategorica").fadeIn()}),$("#varNormal").click(function(){a(),$("#formNormal").fadeIn()}),$("#varUniforme").click(function(){a(),$("#formUniforme").fadeIn()}),$("#varExponencial").click(function(){a(),$("#formExponencial").fadeIn()}),$("#ag-varEspcifica").click(function(){var a=$("#nameEsp").val();arrayValues=[$("#valorEsp").val()],varn.name=a,varn.type="espcifica",$("#outFormEspecifica").text(a+"= ["+arrayValues+"]"),$("#endVar").removeClass("hide")}),$("#ag-varDiscreta").click(function(){console.log("NEAa");var a=$("#nameDis").val();arrayValues.splice(arrayValues.length,0,[$("#valorDis").val()]),varn.name=a,varn.type="discreta",$("#outFormDiscreta").text(a+"= ["+arrayValues+"]"),$("#endVar").removeClass("hide")}),$("#ag-varCategorica").click(function(){var a=$("#nameCat").val();arrayValues.splice(arrayValues.length,0,[$("#valorCat").val()]),varn.name=a,varn.type="categorica",$("#outFormCategorica").text(a+"= ["+arrayValues+"]"),$("#endVar").removeClass("hide")}),$("#ag-varNormal").click(function(){var a=$("#nameNor").val(),b=$("#normalNor").val(),c=$("#desviacionNor").val(),d=$("#incNor").val();varn.name=a,varn.type="normal",varn.inc=d,jsonValues.media=b,jsonValues.desviacion=c,$("#outFormNormal").text(a+"= [µ="+b+", σ="+c+", inc="+d+"]"),$("#endVar").removeClass("hide")}),$("#ag-varUniforme").click(function(){var a=$("#nameUni").val(),b=$("#valueaUni").val(),c=$("#valuebUni").val(),d=$("#incUni").val();varn.name=a,varn.type="uniforme",varn.inc=d,jsonValues.inicio=b,jsonValues.fin=c,$("#outFormUniforme").text(a+"= [a="+b+", b="+c+", inc="+d+"]"),$("#endVar").removeClass("hide")}),$("#ag-varExponencial").click(function(){console.log("..");var a=$("#nameExp").val(),b=$("#valueExp").val(),c=$("#incExp").val();varn.name=a,varn.type="exponencial",varn.inc=c,jsonValues.lamda=b,$("#outFormExponencial").text(a+"= [λ="+b+", inc="+c+"]"),$("#endVar").removeClass("hide")}),$("#endVar").click(function(){var a='<div class="card view-variable" data-id="var" data-content="'+varn.name+'"';if(varn.value=jsonValues,varn.numb=arrayValues,console.log(varn.value),"espcifica"==varn.type)a=a+' data-type="espcifica" data-metadatos="'+arrayValues[0]+'">';else if("discreta"==varn.type){var b="";for(var c in arrayValues)b=b+arrayValues[c]+",";a=a+' data-type="discreta" data-metadatos="'+b+'">'}else if("categorica"==varn.type){var b="";for(var c in arrayValues)b=b+arrayValues[c]+",";a=a+' data-type="categorica" data-metadatos="'+b+'">'}else if("normal"==varn.type){var b="media,"+jsonValues.media+",desviacion,"+jsonValues.desviacion+",inc,"+varn.inc;a=a+' data-type="normal" data-metadatos="'+b+'">'}else if("uniforme"==varn.type){var b="inicio,"+jsonValues.inicio+",fin,"+jsonValues.fin+",inc,"+varn.inc;a=a+' data-type="uniforme" data-metadatos="'+b+'">'}else{var b="lamda,"+jsonValues.lamda;a=a+' data-type="exponencial" data-metadatos="'+b+",inc,"+varn.inc+'">'}$("#panel-variables").append(a+'<span class="var">'+varn.name+"</span></div>"),conjuntoVariables.splice(conjuntoVariables.length,0,varn),$(this).addClass("hide")}),$("#endVar").on("click",function(){$(".view-variable").draggable({appendTo:"body",cursor:"move",helper:"clone",revert:"invalid"})})}),$(document).ready(function(){var a=document.getElementById("eq");setEndOfContenteditable(a)});
//# sourceMappingURL=app.min.js.map